---
title: "R Notebook"
output: html_notebook
editor_options: 
  chunk_output_type: console
---
When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

# <font color='#31708f'>Zendesk Tickets Word Cloud</font>

* [Preprocessing](#second-bullet)

* [WordCloud](#third-bullet)

* [CountVectorizer](#fourth-bullet)

* [LDA Model](#fifth-bullet)

Install package management system 'renv' to ensure packages are installed in the project-specific environment:
```{r}
install.packages("renv")
```

Set your working directory to the project folder.
```{r}
setwd("/home/smsta/Desktop/r_zendesk_tag_cloud")
```

Activate 'renv' in the project:
```{r}
# Load the renv library
library(renv)

# Initialize renv in the project
renv::init()
```


Install packages in the project-specific environment:
```{r}
renv::install("ggplot2")
```

# <font color='#31708f'>Preprocessing</font>

Display the path of current directory:
```{r}
getwd()
```

```{r}
#Make sure code returns a list of files. List all json files in newman folder, sorted in ascending order
file_list <- list.files(path = "/home/smsta/Desktop/zendesk_tag_cloud/newman", pattern = "*.json")
print(file_list)
```

Install and load the jsonlite package:
```{r}
renv::install("jsonlite")
```

Parse json file:
```{r}
library(jsonlite)

file_path <- 'newman-run-report-2020-06-25-06-42-13-124-0-ticketid-upto-3000.json'
json_data <- fromJSON(file_path, flatten = TRUE)

generate_event_tuples <- function(json_data, prefix = NULL) {
  events <- list()

  if (is.list(json_data)) {
    for (key in names(json_data)) {
      current_path <- if (is.null(prefix)) key else paste0(prefix, ".", key)
      value <- json_data[[key]]

      if (is.list(value)) {
        # Recursively call the function for nested objects
        events <- c(events, generate_event_tuples(value, prefix = current_path))
      } else {
        # Add the current key, path, and value to the events list
        events <- c(events, list(c(prefix = current_path, event = key, value = value)))
      }
    }
  } else {
    # Handling named vectors or atomic vectors
    current_path <- if (is.null(prefix)) "root" else prefix
    events <- list(c(prefix = current_path, event = "", value = json_data))
  }

  return(events)
}

result_events <- generate_event_tuples(json_data)

for (event in result_events) {
  cat(sprintf("prefix = %s, event = %s, value = %s\n", event[['prefix']], event[['event']], event[['value']]))
}
```

